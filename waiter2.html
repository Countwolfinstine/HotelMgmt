<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>

<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
<body>
<form action="/submit-order/" target="du" >
	<p><b>Enter user id</b></p>	
	<input type="number" id="user_id" name="user_id" placeholder="user_id">
	<input type="button" id="btn_user_id" name="btn_user_id">


	<p><b>Enetr table no.</b></p>
	<select id="table_no" name="table_no">
		<option value="1">1</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5</option>
		<option value="6">6</option>
		<option value="7">7</option>
		<option value="8">8</option>
		<option value="9">9</option>
		<option value="10">10</option>
	</select>
	<table id="menu_items">
		<tr>
			<th>Name</th>
			<th>Cost</th>
			<th>Quantity</th>
		</tr>
		
	</table>
	<input type="submit" name="submit" value="Submit" formmethod="post">
</form>
<div id="check">
	<p><b>Check out:</b></p>
	<input type="number" id="check_userId" placeholder="check_userId" />
	<input type="number" id="check_tableNo" placeholder="check_tableNo"/>
	<input type="button" value="checkout" id="btn_check"/>
</div>
<div id="bill">
	<table id="table_bill">
		<tr>
			<th>Item name</th>
			<th>Quantity</th>
			<th>Price</th>
			<th>Amount</th>
		</tr>
	</table>	
</div>
<iframe src="" id = "du"></iframe>
</body>
<script type="text/javascript">
	$(document).ready(function(){
		alert("/get-menu/"+$('#user_id').val());
		$("#btn_user_id").click(function(){
			$.getJSON("/get-menu/"+$('#user_id').val(),printTerms);	
		});
		
		$('form').submit(function(event){
			console.log("gg")
			window.location.href = "index.html"
		});

		$("#btn_check").click(function(){
			console.log("/check/"+$("#check_userId").val()+"/"+$("#check_tableNo").val());
			$.getJSON("/check/"+$("#check_userId").val()+"/"+$("#check_tableNo").val(),printCheck);
		});

	});

	function printTerms(terms){
		$.each(terms,function(index,term){
			$("#menu_items").append("<tr>"+
			"<td>"+term['item_name']+"</td>"+
			"<td>"+term['price']+"</td>"+
			"<td><input type=\"number\" name=\""+term['item_id']+"\" value=\"0\"></td>"+
			"</tr>");
		});	
	}

	function printCheck(terms){
		var total = 0
		$.each(terms,function(index,term){
			total+=term['quantity']*term['price'];
			$("#table_bill").append("<tr>"+
				"<td>"+term['item_name']+"</td>"+
				"<td>"+term['quantity']+"</td>"+
				"<td>"+term['price']+"</td>"+
				"<td>"+term['quantity']*term['price']+"</td>"+
				"</tr>");
		});
		$("#table_bill").append("<tr>"+
			"<td>TOTAL</td>"+
			"<td></td>"+
			"<td></td>"+
			"<td>"+total+"</td>"+
			"</tr>");

	}



</script>

</html>